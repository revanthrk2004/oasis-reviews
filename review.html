<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Oasis Bar & Terrace — Leave a Review</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Montserrat:wght@700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --cream:#F6F4EF; --teal:#013D3B; --text:#0C2A2A; --muted:#e9e9e9;
      --google:#4285F4;   /* Google blue */
      --trip:#34E0A1;     /* TripAdvisor green */
      --dmn:#4D2C91;      /* DesignMyNight purple */
    }
    *{box-sizing:border-box}
    body{ margin:0; font-family:Inter, sans-serif; background:var(--cream); color:var(--text); }
    header{ background:var(--teal); color:#fff; padding:1.2rem; text-align:center; }
    header img{ max-height:80px; object-fit:contain; display:block; margin:0 auto .35rem; }
    header small{ display:block; opacity:.9 }

    .wrapper{ max-width:700px; margin:2rem auto; padding:0 1rem; }
    .card{ background:var(--teal); color:#fff; border-radius:16px; padding:1.5rem; box-shadow:0 8px 20px rgba(0,0,0,.1); }
    .title{ font:700 1.4rem/1.3 Montserrat, sans-serif; margin:0 0 .5rem; }
    .subtitle{ margin:.2rem 0 1rem; color:var(--muted); }

    .copyline{ font-size:.95rem; background:rgba(255,255,255,.08); padding:.75rem 1rem; border-radius:12px; margin:.6rem 0 1rem; word-break:break-word }
    .steps{ margin:.6rem 0 1rem; display:flex; flex-wrap:wrap; gap:.5rem }
    .pill{ border:1px solid rgba(255,255,255,.35); padding:.4rem .7rem; border-radius:999px; font-size:.85rem; background:transparent }

    .status{ margin-top:.5rem; font-size:.95rem; color:#f0f0f0 }
    .actions{ display:flex; flex-wrap:wrap; gap:.6rem; margin-top:.6rem }
    .btn{ appearance:none; border:0; cursor:pointer; font-weight:800; border-radius:28px; padding:.85rem 1.2rem; font-family:Montserrat, sans-serif; color:#fff }
    .btn-google{ background:var(--google) }
    .btn-google:hover{ filter:brightness(1.05) }
    .btn-trip{ background:var(--trip); color:#043b2f }
    .btn-trip:hover{ filter:brightness(1.06) }
    .btn-dmn{ background:var(--dmn) }
    .btn-dmn:hover{ filter:brightness(1.06) }
  </style>
</head>
<body>
<header>
  <img src="/assets/logo.png" alt="Oasis Bar & Terrace" />
  <small>Canada Square Park · Canary Wharf</small>
</header>

<div class="wrapper">
  <div class="card">
    <div class="title">Leave us a review</div>
    <p class="subtitle">We’ll prepare your text automatically. Choose where you’d like to leave your review below.</p>

    <div id="copiedText" class="copyline" aria-live="polite"></div>

    <div class="steps">
      <span class="pill">1) Text ready</span>
      <span class="pill">2) Pick a site</span>
      <span class="pill">3) Tap → Paste</span>
      <span class="pill">4) Stars → Submit</span>
    </div>

    <div id="status" class="status">Choose where you’d like to leave your review:</div>

    <div class="actions">
      <button id="btnGoogle" class="btn btn-google" type="button">Open Google Review</button>
      <button id="btnTrip" class="btn btn-trip" type="button">Open TripAdvisor</button>
      <button id="btnDMN" class="btn btn-dmn" type="button">Open DesignMyNight</button>
    </div>
  </div>
</div>

<script>
  // Destinations
  const GOOGLE_URL = "https://search.google.com/local/writereview?placeid=ChIJmazmXKEDdkgR3hgEtNS3-hY";
  const TRIP_URL   = "https://www.tripadvisor.co.uk/UserReviewEdit-g186338-d28032091-Oasis_Bar_Terrace-London_England.html";
  const DMN_URL    = "https://www.designmynight.com/london/bars/canary-wharf/oasis-bar-terrace";

  // Staff message
  const params = new URLSearchParams(location.search);
  const staff = (params.get("staff") || "our team").trim();
  const template = `I was served by ${staff} and had a great experience at Oasis Bar & Terrace. Thank you!`;

  const isMobile = /Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
  const statusEl = document.getElementById("status");
  const copiedEl = document.getElementById("copiedText");

  function open(url){ location.replace(url); }

  async function copyTemplate(){
    try {
      if (navigator.clipboard?.writeText) {
        await navigator.clipboard.writeText(template);
      }
    } catch { /* silently ignore; we stay neutral */ }
  }

  // Prepare text; if browser allows, try to auto-open Google once
  (async function init(){
    copiedEl.textContent = `“${template}”`;
    copyTemplate(); // fire & forget; if it fails, we keep neutral UI

    // Optional gentle auto-open (does nothing if blocked)
    await new Promise(r => setTimeout(r, isMobile ? 1200 : 600));
    try {
      open(GOOGLE_URL);
      setTimeout(() => {
        if (document.visibilityState !== "hidden") {
          statusEl.textContent = "Choose where you’d like to leave your review:";
        }
      }, isMobile ? 1800 : 900);
    } catch {
      statusEl.textContent = "Choose where you’d like to leave your review:";
    }
  })();

  // Buttons — try copy again (if allowed) then open
  document.getElementById("btnGoogle").addEventListener("click", async ()=>{ try{await copyTemplate();}catch{} open(GOOGLE_URL); });
  document.getElementById("btnTrip").addEventListener("click",   async ()=>{ try{await copyTemplate();}catch{} open(TRIP_URL);   });
  document.getElementById("btnDMN").addEventListener("click",    async ()=>{ try{await copyTemplate();}catch{} open(DMN_URL);    });
</script>
</body>
</html>
