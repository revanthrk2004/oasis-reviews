<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Oasis Bar & Terrace — Staff QR Codes</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;margin:0;padding:2rem;background:#fafafa}
    h1{margin:0 0 1rem 0}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:16px}
    .card{background:#fff;border:1px solid #eee;border-radius:14px;padding:1rem;display:flex;flex-direction:column;align-items:center;gap:.6rem}
    .name{font-weight:700}
    .url{font-size:.8rem;word-break:break-all;color:#555}
    .qr{width:200px;height:200px}
    .error{color:#b00020;margin-top:.5rem}
    @media print {.url{display:none} body{padding:0}}
  </style>
</head>
<body>
  <h1>Oasis Bar &amp; Terrace — Staff QR Codes</h1>
  <div id="error" class="error"></div>
  <div class="grid" id="grid"></div>

  <!-- ✅ Use a stable CDN WITHOUT integrity so it doesn't get blocked -->
  <script src="https://unpkg.com/qrcodejs@1.0.0/qrcode.min.js"></script>

  <script>
    // ====== CONFIG ======
    // If you later switch to clean URLs (/review/index.html), change to .../review
    const BASE = "https://oasis-reviews-revanths-projects-dd0160ca.vercel.app/review.html";

    const STAFF = [
      "Adnan",
      "Aiden",
      "Raven",
      "Revanth",
      "Ishika",
      "Maria",
      "Daniel",
      // add more names here
    ];

    function makeCard(name, url){
      const card = document.createElement('div');
      card.className = 'card';

      const title = document.createElement('div');
      title.className = 'name';
      title.textContent = name;

      const qrWrap = document.createElement('div');
      qrWrap.className = 'qr';

      const link = document.createElement('div');
      link.className = 'url';
      link.textContent = url;

      card.appendChild(title);
      card.appendChild(qrWrap);
      card.appendChild(link);

      // Create QR
      try {
        new QRCode(qrWrap, { text: url, width: 200, height: 200, correctLevel: QRCode.CorrectLevel.M });
      } catch (e) {
        document.getElementById('error').textContent = 'Failed to load QR library. Hard-refresh (Ctrl+F5) or check network.';
        console.error(e);
      }

      return card;
    }

    function init(){
      if (typeof QRCode === 'undefined') {
        document.getElementById('error').textContent = 'QR library not loaded. Check your internet connection and try again.';
        return;
      }
      const grid = document.getElementById('grid');
      STAFF.forEach(name => {
        const url = `${BASE}?staff=${encodeURIComponent(name)}`;
        grid.appendChild(makeCard(name, url));
      });
    }

    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>
